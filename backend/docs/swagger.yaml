basePath: /api
definitions:
  dto.ActivityDTO:
    description: Activity data
    properties:
      date:
        example: "2026-01-04"
        type: string
      hours:
        example: 2.5
        type: number
      id:
        example: 1
        type: integer
      name:
        allOf:
        - $ref: '#/definitions/models.ActivityName'
        example: study
      note:
        example: Worked on Go project
        type: string
    type: object
  dto.ActivitySummary:
    description: Aggregated activity summary
    properties:
      name:
        allOf:
        - $ref: '#/definitions/models.ActivityName'
        example: study
      total_hours:
        example: 15.5
        type: number
    type: object
  dto.AutocompleteResponse:
    description: Autocomplete response with query echo, request ID for tracing, and
      ranked suggestions
    properties:
      query:
        example: john
        type: string
      requestId:
        example: 550e8400-e29b-41d4-a716-446655440000
        type: string
      suggestions:
        items:
          $ref: '#/definitions/dto.AutocompleteSuggestion'
        type: array
    type: object
  dto.AutocompleteSuggestion:
    description: A single autocomplete suggestion with text, kind, score, and metadata
    properties:
      kind:
        example: user
        type: string
      meta:
        $ref: '#/definitions/dto.AutocompleteSuggestionMeta'
      score:
        example: 85.5
        type: number
      text:
        example: john_doe
        type: string
    type: object
  dto.AutocompleteSuggestionMeta:
    description: Additional metadata for autocomplete suggestion (profile pic, verified
      status, etc.)
    properties:
      followersCount:
        example: 150
        type: integer
      isVerified:
        example: false
        type: boolean
      profilePic:
        example: https://storage.blob.core.windows.net/pics/1/abc.jpg
        type: string
    type: object
  dto.BadgeDTO:
    description: Badge information
    properties:
      color:
        example: '#3b82f6'
        type: string
      earned:
        example: true
        type: boolean
      earned_at:
        example: "2026-01-04"
        type: string
      icon:
        example: Zap
        type: string
      key:
        example: spark_starter
        type: string
      name:
        example: Spark Starter
        type: string
      threshold:
        example: 7
        type: integer
    type: object
  dto.BadgesResponse:
    description: List of badges
    properties:
      badges:
        items:
          $ref: '#/definitions/dto.BadgeDTO'
        type: array
      next_badge:
        $ref: '#/definitions/dto.NextBadgeDTO'
      success:
        example: true
        type: boolean
    type: object
  dto.BioResponse:
    description: Bio retrieval result
    properties:
      bio:
        example: Software developer | Coffee enthusiast
        type: string
      success:
        example: true
        type: boolean
    type: object
  dto.ChangePasswordRequest:
    description: Change password for authenticated user
    properties:
      current_password:
        example: OldPass123
        type: string
      new_password:
        example: NewPass123
        type: string
    type: object
  dto.CleanupResponse:
    description: Push notification cleanup results
    properties:
      gone_subscriptions_deleted:
        example: 3
        type: integer
      old_logs_deleted:
        example: 100
        type: integer
      stale_subscriptions_cleaned:
        example: 5
        type: integer
      success:
        example: true
        type: boolean
    type: object
  dto.CreateActivityRequest:
    description: Create or update an activity
    properties:
      activity:
        allOf:
        - $ref: '#/definitions/models.ActivityName'
        example: study
      date:
        description: 'Format: YYYY-MM-DD'
        example: "2026-01-04"
        type: string
      hours:
        example: 2.5
        type: number
      note:
        example: Worked on Go project
        type: string
      username:
        example: john_doe
        type: string
    type: object
  dto.DataResponse:
    description: Generic response with data payload
    properties:
      data: {}
      success:
        example: true
        type: boolean
    type: object
  dto.DayActivityBreakdown:
    description: Activity breakdown for a day
    properties:
      hours:
        example: 2.5
        type: number
      name:
        allOf:
        - $ref: '#/definitions/models.ActivityName'
        example: study
    type: object
  dto.DayAnalytics:
    description: Daily analytics data
    properties:
      activities:
        items:
          $ref: '#/definitions/dto.DayActivityBreakdown'
        type: array
      date:
        example: "2026-01-04"
        type: string
      day_name:
        example: Sat
        type: string
      total_hours:
        example: 8.5
        type: number
    type: object
  dto.ErrorResponse:
    description: Generic error response
    properties:
      error:
        example: Invalid request
        type: string
      error_code:
        example: INVALID_REQUEST
        type: string
      success:
        example: false
        type: boolean
    type: object
  dto.FollowActionResponse:
    description: Follow/unfollow action result
    properties:
      message:
        example: Now following
        type: string
      state:
        description: ACTIVE, PENDING
        example: ACTIVE
        type: string
      success:
        example: true
        type: boolean
    type: object
  dto.FollowCountsDTO:
    description: Follow counts information
    properties:
      followers_count:
        example: 150
        type: integer
      following_count:
        example: 75
        type: integer
      pending_requests_count:
        example: 3
        type: integer
    type: object
  dto.FollowCountsResponse:
    description: Follow counts retrieval result
    properties:
      counts:
        $ref: '#/definitions/dto.FollowCountsDTO'
      success:
        example: true
        type: boolean
    type: object
  dto.FollowListResponse:
    description: Paginated list of followers/following
    properties:
      has_more:
        example: true
        type: boolean
      next_cursor:
        example: eyJjcmVhdGVkX2F0IjoiMjAyNi0wMS0xMFQxMjowMDowMFoiLCJ1c2VyX2lkIjoxMH0=
        type: string
      success:
        example: true
        type: boolean
      users:
        items:
          $ref: '#/definitions/dto.FollowUserDTO'
        type: array
    type: object
  dto.FollowRequestDTO:
    description: Pending follow request information
    properties:
      bio:
        example: Software developer
        type: string
      id:
        example: 1
        type: integer
      is_verified:
        example: false
        type: boolean
      profile_pic:
        example: https://storage.blob.core.windows.net/pics/1/abc.jpg
        type: string
      requested_at:
        example: "2026-01-04T12:00:00Z"
        type: string
      username:
        example: john_doe
        type: string
    type: object
  dto.FollowRequestListResponse:
    description: Paginated list of pending follow requests
    properties:
      has_more:
        example: true
        type: boolean
      next_cursor:
        example: eyJjcmVhdGVkX2F0IjoiMjAyNi0wMS0xMFQxMjowMDowMFoiLCJ1c2VyX2lkIjoxMH0=
        type: string
      requests:
        items:
          $ref: '#/definitions/dto.FollowRequestDTO'
        type: array
      success:
        example: true
        type: boolean
    type: object
  dto.FollowUserDTO:
    description: User information for follow lists
    properties:
      bio:
        example: Software developer
        type: string
      followed_at:
        example: "2026-01-04T12:00:00Z"
        type: string
      id:
        example: 1
        type: integer
      is_private:
        example: false
        type: boolean
      is_verified:
        example: false
        type: boolean
      profile_pic:
        example: https://storage.blob.core.windows.net/pics/1/abc.jpg
        type: string
      username:
        example: john_doe
        type: string
    type: object
  dto.ForgotPasswordRequest:
    description: Password reset request initiation
    properties:
      email:
        example: user@example.com
        type: string
    type: object
  dto.GetActivitiesRequest:
    description: Get activities for a date range
    properties:
      end_date:
        description: 'Format: YYYY-MM-DD'
        example: "2026-01-07"
        type: string
      start_date:
        description: 'Format: YYYY-MM-DD'
        example: "2026-01-01"
        type: string
      username:
        example: john_doe
        type: string
    type: object
  dto.GetBadgesByUsernameRequest:
    description: Request to get badges by username
    properties:
      username:
        example: john_doe
        type: string
    type: object
  dto.GetDailyTotalsRequest:
    description: Get daily hour totals for a date range (for calendar heat map)
    properties:
      end_date:
        description: 'Format: YYYY-MM-DD'
        example: "2026-01-31"
        type: string
      start_date:
        description: 'Format: YYYY-MM-DD'
        example: "2026-01-01"
        type: string
      username:
        example: john_doe
        type: string
    type: object
  dto.GetLikesRequest:
    description: Get likes for a specific day
    properties:
      date:
        description: 'Format: YYYY-MM-DD'
        example: "2026-01-04"
        type: string
      username:
        example: john_doe
        type: string
    type: object
  dto.GetStreakRequest:
    description: Get streak data for a specific date
    properties:
      date:
        description: 'Format: YYYY-MM-DD'
        example: "2026-01-04"
        type: string
      username:
        example: john_doe
        type: string
    type: object
  dto.GetTileConfigByUsernameRequest:
    properties:
      username:
        type: string
    type: object
  dto.GetWeekAnalyticsRequest:
    description: Get weekly analytics starting from a specific Monday
    properties:
      username:
        example: john_doe
        type: string
      week_start:
        description: 'Format: YYYY-MM-DD (Monday of the week)'
        example: "2025-12-30"
        type: string
    type: object
  dto.LikeActionResponse:
    description: Response for like/unlike action
    properties:
      liked:
        example: true
        type: boolean
      new_count:
        example: 6
        type: integer
      success:
        example: true
        type: boolean
    type: object
  dto.LikeDayRequest:
    description: Like or unlike a user's day
    properties:
      date:
        description: 'Format: YYYY-MM-DD'
        example: "2026-01-04"
        type: string
      username:
        description: User whose day is being liked
        example: john_doe
        type: string
    type: object
  dto.LikerDTO:
    description: User who liked a day
    properties:
      id:
        example: 1
        type: integer
      is_verified:
        example: false
        type: boolean
      liked_at:
        example: "2026-01-04T12:00:00Z"
        type: string
      profile_pic:
        example: https://storage.blob.core.windows.net/pics/1/abc.jpg
        type: string
      username:
        example: john_doe
        type: string
    type: object
  dto.LikesResponse:
    description: Likes data for a day
    properties:
      count:
        example: 5
        type: integer
      data:
        items:
          $ref: '#/definitions/dto.LikerDTO'
        type: array
      success:
        example: true
        type: boolean
      user_has_liked:
        example: true
        type: boolean
    type: object
  dto.LoginRequest:
    description: User login request
    properties:
      identifier:
        description: Can be email or username
        example: john_doe
        type: string
      password:
        example: SecurePass123
        type: string
    type: object
  dto.LoginResponse:
    description: Successful login response with JWT token
    properties:
      access_token:
        example: eyJhbGciOiJIUzI1NiIs...
        type: string
      expires_at:
        example: "2026-01-05T12:00:00Z"
        type: string
      expires_in:
        description: seconds
        example: 86400
        type: integer
      success:
        example: true
        type: boolean
      token_type:
        example: Bearer
        type: string
    type: object
  dto.MutualsResponse:
    description: Mutual followers list
    properties:
      has_more:
        example: true
        type: boolean
      next_cursor:
        type: string
      success:
        example: true
        type: boolean
      users:
        items:
          $ref: '#/definitions/dto.FollowUserDTO'
        type: array
    type: object
  dto.NextBadgeDTO:
    description: Next badge to earn with progress
    properties:
      color:
        example: '#f97316'
        type: string
      icon:
        example: Flame
        type: string
      key:
        example: flame_keeper
        type: string
      name:
        example: Flame Keeper
        type: string
      progress:
        example: 7
        type: integer
      threshold:
        example: 15
        type: integer
    type: object
  dto.NotificationActionResponse:
    description: Response for mark as read/delete actions
    properties:
      message:
        example: Notification marked as read
        type: string
      success:
        example: true
        type: boolean
    type: object
  dto.NotificationDTO:
    description: Notification information
    properties:
      body:
        example: john_doe liked your Jan 5 activities
        type: string
      created_at:
        example: "2026-01-05T10:00:00Z"
        type: string
      id:
        example: 1
        type: integer
      metadata:
        additionalProperties: true
        type: object
      read_at:
        example: "2026-01-05T12:00:00Z"
        type: string
      title:
        example: New Like!
        type: string
      type:
        example: like_received
        type: string
    type: object
  dto.NotificationsResponse:
    description: Paginated list of notifications
    properties:
      has_more:
        example: true
        type: boolean
      notifications:
        items:
          $ref: '#/definitions/dto.NotificationDTO'
        type: array
      page:
        example: 1
        type: integer
      page_size:
        example: 20
        type: integer
      success:
        example: true
        type: boolean
      total:
        example: 25
        type: integer
    type: object
  dto.PrivacyResponse:
    description: Privacy setting result
    properties:
      is_private:
        example: false
        type: boolean
      success:
        example: true
        type: boolean
    type: object
  dto.ProfileResponse:
    description: User profile information
    properties:
      bio:
        example: Software developer
        type: string
      email:
        example: john@example.com
        type: string
      email_verified:
        example: true
        type: boolean
      followers_count:
        example: 150
        type: integer
      following_count:
        example: 75
        type: integer
      is_private:
        example: false
        type: boolean
      is_verified:
        example: false
        type: boolean
      profile_pic:
        example: https://storage.blob.core.windows.net/pics/1/abc.jpg
        type: string
      relationship_state:
        description: FOLLOWING, REQUESTED, NONE (only for other users)
        example: FOLLOWING
        type: string
      success:
        example: true
        type: boolean
      username:
        example: john_doe
        type: string
    type: object
  dto.PublicProfileResponse:
    description: Public profile information for viewing another user
    properties:
      bio:
        description: Hidden for private accounts
        example: Software developer
        type: string
      followers_count:
        example: 150
        type: integer
      following_count:
        example: 75
        type: integer
      id:
        example: 1
        type: integer
      is_private:
        example: false
        type: boolean
      is_verified:
        example: false
        type: boolean
      last_logged_at:
        description: Hidden for private accounts unless following
        example: "2026-01-29T00:00:00Z"
        type: string
      profile_pic:
        example: https://storage.blob.core.windows.net/pics/1/abc.jpg
        type: string
      relationship_state:
        description: FOLLOWING, REQUESTED, NONE
        example: FOLLOWING
        type: string
      success:
        example: true
        type: boolean
      username:
        example: john_doe
        type: string
    type: object
  dto.PushDeviceInfo:
    properties:
      browser:
        example: chrome
        type: string
      platform:
        example: windows
        type: string
      userAgent:
        example: Mozilla/5.0...
        type: string
    type: object
  dto.PushPreferenceDTO:
    description: Push notification preferences
    properties:
      preferences:
        additionalProperties:
          type: boolean
        type: object
      push_enabled:
        example: true
        type: boolean
      quiet_end:
        example: "08:00"
        type: string
      quiet_hours_enabled:
        example: false
        type: boolean
      quiet_start:
        example: "22:00"
        type: string
      timezone:
        example: America/New_York
        type: string
    type: object
  dto.PushPreferencesResponse:
    description: Push preferences retrieval result
    properties:
      preferences:
        $ref: '#/definitions/dto.PushPreferenceDTO'
      success:
        example: true
        type: boolean
    type: object
  dto.PushSubscriptionData:
    properties:
      endpoint:
        example: https://fcm.googleapis.com/fcm/send/...
        type: string
      keys:
        $ref: '#/definitions/dto.PushSubscriptionKeys'
    type: object
  dto.PushSubscriptionKeys:
    properties:
      auth:
        example: tBHIt...
        type: string
      p256dh:
        example: BNcRd...
        type: string
    type: object
  dto.PushSubscriptionResponse:
    description: Push subscription registration result
    properties:
      message:
        example: Subscription registered successfully
        type: string
      success:
        example: true
        type: boolean
    type: object
  dto.RegisterPushSubscriptionRequest:
    description: Register a new push subscription for the authenticated user
    properties:
      device:
        $ref: '#/definitions/dto.PushDeviceInfo'
      keyId:
        example: prod-2026-01
        type: string
      subscription:
        $ref: '#/definitions/dto.PushSubscriptionData'
    type: object
  dto.RegisterRequest:
    description: User registration request
    properties:
      email:
        example: user@example.com
        type: string
      password:
        example: SecurePass123
        type: string
      username:
        example: john_doe
        type: string
    type: object
  dto.RelationshipLookupRequest:
    description: Batch lookup relationship states for UI
    properties:
      target_ids:
        example:
        - 1
        - 2
        - 3
        items:
          type: integer
        type: array
    type: object
  dto.RelationshipLookupResponse:
    description: Batch relationship lookup result
    properties:
      relationships:
        additionalProperties:
          type: string
        description: userID -> "FOLLOWING", "REQUESTED", "NONE"
        type: object
      success:
        example: true
        type: boolean
    type: object
  dto.ResetPasswordRequest:
    description: Password reset with token
    properties:
      confirm_password:
        example: NewSecurePass123
        type: string
      new_password:
        example: NewSecurePass123
        type: string
      token:
        example: abc123def456
        type: string
    type: object
  dto.SaveTileConfigRequest:
    properties:
      config:
        $ref: '#/definitions/models.JSONB'
    type: object
  dto.SearchSuggestionUser:
    description: User information for search suggestions
    properties:
      followersCount:
        example: 150
        type: integer
      id:
        example: 1
        type: integer
      isVerified:
        example: false
        type: boolean
      profilePic:
        example: https://storage.blob.core.windows.net/pics/1/abc.jpg
        type: string
      username:
        example: john_doe
        type: string
    type: object
  dto.SearchSuggestionsResponse:
    description: Search suggestions with recent searches and trending users
    properties:
      recent:
        items:
          $ref: '#/definitions/dto.SearchSuggestionUser'
        type: array
      trending:
        items:
          $ref: '#/definitions/dto.SearchSuggestionUser'
        type: array
    type: object
  dto.SearchUsersRequest:
    description: Search for users by username
    properties:
      username:
        example: john
        type: string
    type: object
  dto.StreakDTO:
    description: Streak information
    properties:
      current:
        example: 7
        type: integer
      date:
        example: "2026-01-04"
        type: string
      id:
        example: 1
        type: integer
      longest:
        example: 30
        type: integer
      new_badges:
        items:
          $ref: '#/definitions/dto.BadgeDTO'
        type: array
    type: object
  dto.StreakInfo:
    description: Streak information in analytics
    properties:
      current:
        example: 7
        type: integer
      longest:
        example: 30
        type: integer
      longest_end:
        example: "2025-12-30"
        type: string
      longest_start:
        example: "2025-12-01"
        type: string
    type: object
  dto.StreakResponse:
    description: Streak data response
    properties:
      data:
        $ref: '#/definitions/dto.StreakDTO'
      success:
        example: true
        type: boolean
    type: object
  dto.SuccessResponse:
    description: Generic success response
    properties:
      message:
        example: Operation completed successfully
        type: string
      success:
        example: true
        type: boolean
    type: object
  dto.TileConfigResponse:
    properties:
      data:
        $ref: '#/definitions/models.JSONB'
      success:
        type: boolean
    type: object
  dto.UnreadCountResponse:
    description: Unread notification count
    properties:
      success:
        example: true
        type: boolean
      unread_count:
        example: 5
        type: integer
    type: object
  dto.UnregisterPushSubscriptionRequest:
    description: Unregister a push subscription
    properties:
      endpoint:
        example: https://fcm.googleapis.com/fcm/send/...
        type: string
    type: object
  dto.UpdateBioRequest:
    description: Bio update request
    properties:
      bio:
        example: Software developer | Coffee enthusiast
        type: string
    type: object
  dto.UpdatePrivacyRequest:
    description: Privacy setting update request
    properties:
      is_private:
        example: true
        type: boolean
    type: object
  dto.UpdatePushPreferencesRequest:
    description: Update push notification preferences
    properties:
      preferences:
        additionalProperties:
          type: boolean
        description: Per-type toggles
        type: object
      push_enabled:
        type: boolean
      quiet_end:
        description: '"HH:MM" format'
        type: string
      quiet_hours_enabled:
        type: boolean
      quiet_start:
        description: '"HH:MM" format'
        type: string
      timezone:
        description: IANA timezone
        type: string
    type: object
  dto.UpdateUsernameRequest:
    description: Username update request
    properties:
      new_username:
        example: new_username
        type: string
    type: object
  dto.UserDTO:
    description: User information for search results
    properties:
      bio:
        description: Only included for public profiles
        example: Software developer
        type: string
      email:
        example: john@example.com
        type: string
      id:
        example: 1
        type: integer
      is_private:
        example: false
        type: boolean
      is_verified:
        example: false
        type: boolean
      profile_pic:
        example: https://storage.blob.core.windows.net/pics/1/abc.jpg
        type: string
      username:
        example: john_doe
        type: string
    type: object
  dto.UsernameUpdateResponse:
    description: Username update result
    properties:
      message:
        example: Username updated successfully
        type: string
      new_username:
        example: new_username
        type: string
      success:
        example: true
        type: boolean
    type: object
  dto.VapidPublicKeyResponse:
    description: VAPID public key for push subscription
    properties:
      keyId:
        example: prod-2026-01
        type: string
      publicKey:
        example: BEl62i...
        type: string
      success:
        example: true
        type: boolean
    type: object
  dto.VerifyEmailRequest:
    description: Email verification with token
    properties:
      token:
        example: abc123def456
        type: string
    type: object
  dto.WeekAnalyticsResponse:
    description: Weekly analytics data
    properties:
      activity_summary:
        items:
          $ref: '#/definitions/dto.ActivitySummary'
        type: array
      daily_breakdown:
        items:
          $ref: '#/definitions/dto.DayAnalytics'
        type: array
      is_current_week:
        example: true
        type: boolean
      percentage_change:
        example: 11.84
        type: number
      percentage_vs_current:
        example: 0
        type: number
      streak:
        $ref: '#/definitions/dto.StreakInfo'
      success:
        example: true
        type: boolean
      total_hours_current_week:
        example: 42.5
        type: number
      total_hours_prev_week:
        example: 38
        type: number
      total_hours_this_week:
        example: 42.5
        type: number
    type: object
  models.ActivityName:
    enum:
    - sleep
    - study
    - book_reading
    - eating
    - friends
    - grooming
    - workout
    - reels
    - family
    - idle
    - creative
    - travelling
    - errand
    - rest
    - entertainment
    - office
    type: string
    x-enum-varnames:
    - ActivitySleep
    - ActivityStudy
    - ActivityBookReading
    - ActivityEating
    - ActivityFriends
    - ActivityGrooming
    - ActivityWorkout
    - ActivityReels
    - ActivityFamily
    - ActivityIdle
    - ActivityCreative
    - ActivityTravelling
    - ActivityErrand
    - ActivityRest
    - ActivityEntertainment
    - ActivityOffice
  models.JSONB:
    additionalProperties: true
    type: object
host: localhost:3000
info:
  contact:
    name: API Support
    url: https://github.com/aman1117/growth-tracker
  description: |-
    API for tracking daily activities, streaks, and analytics.

    ## Features
    - User authentication with JWT tokens
    - Activity tracking with customizable types
    - Streak tracking to maintain consistency
    - Weekly analytics with daily breakdowns
    - Privacy controls for user profiles
    - Tile configuration for dashboard customization

    ## Rate Limits
    - Login/Register: 5 requests per minute per IP
    - Password Reset: 3 requests per minute per IP
    - General API: 60 requests per minute per user
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  title: Growth Tracker API
  version: "1.0"
paths:
  /activity-photo:
    post:
      consumes:
      - multipart/form-data
      description: Upload a photo for an activity on a specific date (max 5MB, within
        7 days)
      parameters:
      - description: Image file (JPEG, PNG, WebP)
        in: formData
        name: image
        required: true
        type: file
      - description: Activity name
        in: formData
        name: activity_name
        required: true
        type: string
      - description: Photo date (YYYY-MM-DD)
        in: formData
        name: photo_date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Photo uploaded successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Validation error or duplicate
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "409":
          description: Photo already exists
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Upload activity photo
      tags:
      - Activity Photos
  /activity-photo/{id}:
    delete:
      description: Delete a photo owned by the current user
      parameters:
      - description: Photo ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Photo deleted
          schema:
            $ref: '#/definitions/dto.SuccessResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Not authorized to delete this photo
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "404":
          description: Photo not found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete activity photo
      tags:
      - Activity Photos
  /activity-photo/{id}/interactions:
    get:
      description: Get combined list of viewers and likers with interaction type (owner
        only)
      parameters:
      - description: Photo ID
        in: path
        name: id
        required: true
        type: integer
      - description: Max results (default 20)
        in: query
        name: limit
        type: integer
      - description: Offset for pagination
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Interactions list
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Not photo owner
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "404":
          description: Photo not found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get photo interactions
      tags:
      - Activity Photos
  /activity-photo/{id}/like:
    delete:
      description: Remove like from a story photo
      parameters:
      - description: Photo ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Photo unliked
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "404":
          description: Photo not found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Unlike a photo
      tags:
      - Activity Photos
    post:
      description: Like a story photo (also records view)
      parameters:
      - description: Photo ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Photo liked
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Cannot like own photo
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Must follow user
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "404":
          description: Photo not found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Like a photo
      tags:
      - Activity Photos
  /activity-photo/{id}/like-status:
    get:
      description: Get whether current user has liked a photo and total like count
      parameters:
      - description: Photo ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Like status
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "404":
          description: Photo not found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get photo like status
      tags:
      - Activity Photos
  /activity-photo/{id}/view:
    post:
      description: Record that the current user viewed a photo
      parameters:
      - description: Photo ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: View recorded
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "404":
          description: Photo not found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Record photo view
      tags:
      - Activity Photos
  /activity-photo/{id}/viewers:
    get:
      description: Get list of users who viewed a photo (owner only)
      parameters:
      - description: Photo ID
        in: path
        name: id
        required: true
        type: integer
      - description: Max results (default 20)
        in: query
        name: limit
        type: integer
      - description: Offset for pagination
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Viewers list
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Not photo owner
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "404":
          description: Photo not found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get photo viewers
      tags:
      - Activity Photos
  /activity-photos:
    get:
      description: Get photos for a user on a specific date. Records views for other
        users' photos.
      parameters:
      - description: User ID
        in: query
        name: user_id
        required: true
        type: integer
      - description: Date (YYYY-MM-DD)
        in: query
        name: date
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Photos list
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Not authorized to view photos
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get activity photos
      tags:
      - Activity Photos
  /activity-photos/following:
    get:
      description: Get photo stories from users the current user follows for a specific
        date
      parameters:
      - description: Date (YYYY-MM-DD)
        in: query
        name: date
        required: true
        type: string
      - description: Max users to return (default 20)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Story groups
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get following users' stories
      tags:
      - Activity Photos
  /auth/forgot-password:
    post:
      consumes:
      - application/json
      description: Send password reset email (always returns success for security)
      parameters:
      - description: User email
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.ForgotPasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Reset email sent (if user exists)
          schema:
            $ref: '#/definitions/dto.SuccessResponse'
      summary: Request password reset
      tags:
      - Authentication
  /auth/resend-verification:
    post:
      consumes:
      - application/json
      description: Resend verification email to the authenticated user (rate limited)
      produces:
      - application/json
      responses:
        "200":
          description: Verification email sent
          schema:
            $ref: '#/definitions/dto.SuccessResponse'
        "400":
          description: Already verified or in cooldown
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "429":
          description: Rate limit exceeded
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Resend verification email
      tags:
      - Authentication
  /auth/reset-password:
    post:
      consumes:
      - application/json
      description: Reset password using the token from email
      parameters:
      - description: Reset token and new password
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.ResetPasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Password reset successful
          schema:
            $ref: '#/definitions/dto.SuccessResponse'
        "400":
          description: Invalid token or validation error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Reset password with token
      tags:
      - Authentication
  /auth/verify-email:
    post:
      consumes:
      - application/json
      description: Verify user's email address using the token from email
      parameters:
      - description: Verification token
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.VerifyEmailRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Email verified successfully
          schema:
            $ref: '#/definitions/dto.SuccessResponse'
        "400":
          description: Invalid or expired token
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Verify email address
      tags:
      - Authentication
  /autocomplete/users:
    get:
      consumes:
      - application/json
      description: Search for users by username prefix with fuzzy matching, ranked
        by relevance and popularity
      parameters:
      - description: Search query (1-80 chars)
        in: query
        maxLength: 80
        minLength: 1
        name: q
        required: true
        type: string
      - default: 12
        description: Max results (1-20, default 12)
        in: query
        maximum: 20
        minimum: 1
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Autocomplete suggestions
          schema:
            $ref: '#/definitions/dto.AutocompleteResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Server error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Autocomplete users
      tags:
      - Users
  /badges:
    get:
      consumes:
      - application/json
      description: Retrieve all badges for the current user
      produces:
      - application/json
      responses:
        "200":
          description: User badges
          schema:
            $ref: '#/definitions/dto.BadgesResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user badges
      tags:
      - Badges
  /badges/user:
    post:
      consumes:
      - application/json
      description: Retrieve all badges for a user by username (badges are always public)
      parameters:
      - description: Username
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.GetBadgesByUsernameRequest'
      produces:
      - application/json
      responses:
        "200":
          description: User badges
          schema:
            $ref: '#/definitions/dto.BadgesResponse'
        "400":
          description: User not found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user badges by username
      tags:
      - Badges
  /change-password:
    post:
      consumes:
      - application/json
      description: Change the authenticated user's password
      parameters:
      - description: Current and new password
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.ChangePasswordRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Password changed successfully
          schema:
            $ref: '#/definitions/dto.SuccessResponse'
        "400":
          description: Validation error or incorrect password
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Change password
      tags:
      - Profile
  /create-activity:
    post:
      consumes:
      - application/json
      description: Log hours for a specific activity on a date
      parameters:
      - description: Activity details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.CreateActivityRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Activity updated successfully
          schema:
            $ref: '#/definitions/dto.SuccessResponse'
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create or update an activity
      tags:
      - Activities
  /follow-requests/{targetId}/cancel:
    post:
      consumes:
      - application/json
      description: Cancel an outgoing pending follow request
      parameters:
      - description: Target User ID
        in: path
        name: targetId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.SuccessResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Cancel a follow request
      tags:
      - Follow
  /get-activities:
    post:
      consumes:
      - application/json
      description: Retrieve activities for a user within a date range
      parameters:
      - description: Date range and username
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.GetActivitiesRequest'
      produces:
      - application/json
      responses:
        "200":
          description: List of activities
          schema:
            allOf:
            - $ref: '#/definitions/dto.DataResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.ActivityDTO'
                  type: array
              type: object
        "400":
          description: Validation error or user not found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Private account
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get activities for a user
      tags:
      - Activities
  /get-bio:
    get:
      description: Get current user's bio
      produces:
      - application/json
      responses:
        "200":
          description: Bio content
          schema:
            $ref: '#/definitions/dto.BioResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get bio
      tags:
      - Profile
  /get-daily-totals:
    post:
      consumes:
      - application/json
      description: Retrieve total hours per day for a user within a date range
      parameters:
      - description: Date range and username
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.GetDailyTotalsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Map of dates to total hours
          schema:
            allOf:
            - $ref: '#/definitions/dto.DataResponse'
            - properties:
                data:
                  additionalProperties:
                    format: float32
                    type: number
                  type: object
              type: object
        "400":
          description: Validation error or user not found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Private account
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get daily totals for heat map
      tags:
      - Activities
  /get-likes:
    post:
      consumes:
      - application/json
      description: Get all likes for a specific user's day (only visible if profile
        is public or it's your own day)
      parameters:
      - description: Get likes request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.GetLikesRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Likes data
          schema:
            $ref: '#/definitions/dto.LikesResponse'
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Private account
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get likes for a day
      tags:
      - Likes
  /get-privacy:
    get:
      description: Get current account privacy setting
      produces:
      - application/json
      responses:
        "200":
          description: Privacy setting
          schema:
            $ref: '#/definitions/dto.PrivacyResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get privacy setting
      tags:
      - Profile
  /get-streak:
    post:
      consumes:
      - application/json
      description: Retrieve streak information for a user on a specific date
      parameters:
      - description: Username and date
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.GetStreakRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Streak data
          schema:
            $ref: '#/definitions/dto.StreakResponse'
        "400":
          description: Validation error or streak not found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Private account
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get streak data
      tags:
      - Streaks
  /get-week-analytics:
    post:
      consumes:
      - application/json
      description: Retrieve weekly analytics including daily breakdown and activity
        summary
      parameters:
      - description: Username and week start date
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.GetWeekAnalyticsRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Weekly analytics data
          schema:
            $ref: '#/definitions/dto.WeekAnalyticsResponse'
        "400":
          description: Validation error or user not found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Private account
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get weekly analytics
      tags:
      - Analytics
  /like-day:
    post:
      consumes:
      - application/json
      description: Like another user's day (only public profiles can be liked)
      parameters:
      - description: Like request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.LikeDayRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Like successful
          schema:
            $ref: '#/definitions/dto.LikeActionResponse'
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Private account
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Like a user's day
      tags:
      - Likes
  /login:
    post:
      consumes:
      - application/json
      description: Authenticate user with email/username and password, returns JWT
        token
      parameters:
      - description: Login credentials
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Login successful with JWT token
          schema:
            $ref: '#/definitions/dto.LoginResponse'
        "400":
          description: Invalid credentials
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: User login
      tags:
      - Authentication
  /me/follow-counts/reconcile:
    post:
      consumes:
      - application/json
      description: Recalculate follow counts from actual edge data (fixes counter
        drift)
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.SuccessResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Reconcile follow counts
      tags:
      - Follow
  /me/follow-requests/{requesterId}/accept:
    post:
      consumes:
      - application/json
      description: Accept an incoming follow request
      parameters:
      - description: Requester User ID
        in: path
        name: requesterId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.SuccessResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Accept a follow request
      tags:
      - Follow
  /me/follow-requests/{requesterId}/decline:
    post:
      consumes:
      - application/json
      description: Decline an incoming follow request
      parameters:
      - description: Requester User ID
        in: path
        name: requesterId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.SuccessResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Decline a follow request
      tags:
      - Follow
  /me/follow-requests/incoming:
    get:
      consumes:
      - application/json
      description: Get paginated list of pending follow requests
      parameters:
      - description: Pagination cursor
        in: query
        name: cursor
        type: string
      - default: 20
        description: Number of results
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.FollowRequestListResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get incoming follow requests
      tags:
      - Follow
  /me/followers/{followerId}:
    delete:
      consumes:
      - application/json
      description: Remove a user from your followers list
      parameters:
      - description: Follower User ID
        in: path
        name: followerId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.SuccessResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Remove a follower
      tags:
      - Follow
  /notifications:
    get:
      consumes:
      - application/json
      description: Get paginated list of notifications for the current user
      parameters:
      - description: 'Page number (default: 1)'
        in: query
        name: page
        type: integer
      - description: 'Page size (default: 20, max: 50)'
        in: query
        name: page_size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Notifications list
          schema:
            $ref: '#/definitions/dto.NotificationsResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get notifications
      tags:
      - Notifications
  /notifications/{id}:
    delete:
      description: Delete a specific notification
      parameters:
      - description: Notification ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/dto.NotificationActionResponse'
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "404":
          description: Not found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete notification
      tags:
      - Notifications
  /notifications/{id}/read:
    patch:
      description: Mark a specific notification as read
      parameters:
      - description: Notification ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/dto.NotificationActionResponse'
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Mark notification as read
      tags:
      - Notifications
  /notifications/read-all:
    patch:
      description: Mark all notifications as read for the current user
      produces:
      - application/json
      responses:
        "200":
          description: Success
          schema:
            $ref: '#/definitions/dto.NotificationActionResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Mark all as read
      tags:
      - Notifications
  /notifications/unread-count:
    get:
      description: Get the count of unread notifications
      produces:
      - application/json
      responses:
        "200":
          description: Unread count
          schema:
            $ref: '#/definitions/dto.UnreadCountResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get unread count
      tags:
      - Notifications
  /profile:
    get:
      description: Get full profile of authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: User profile
          schema:
            $ref: '#/definitions/dto.ProfileResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user profile
      tags:
      - Profile
  /push/cleanup:
    post:
      consumes:
      - application/json
      description: Cleanup stale subscriptions, gone subscriptions, and old delivery
        logs
      produces:
      - application/json
      responses:
        "200":
          description: Cleanup results
          schema:
            $ref: '#/definitions/dto.CleanupResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Cleanup stale push data
      tags:
      - Push Notifications
  /push/preferences:
    get:
      consumes:
      - application/json
      description: Get push notification preferences for the authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: Push preferences
          schema:
            $ref: '#/definitions/dto.PushPreferencesResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get push preferences
      tags:
      - Push Notifications
    put:
      consumes:
      - application/json
      description: Update push notification preferences for the authenticated user
      parameters:
      - description: Preference updates
        in: body
        name: preferences
        required: true
        schema:
          $ref: '#/definitions/dto.UpdatePushPreferencesRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Updated preferences
          schema:
            $ref: '#/definitions/dto.PushPreferencesResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update push preferences
      tags:
      - Push Notifications
  /push/subscriptions:
    delete:
      consumes:
      - application/json
      description: Remove a Web Push subscription for the authenticated user
      parameters:
      - description: Subscription endpoint to remove
        in: body
        name: subscription
        required: true
        schema:
          $ref: '#/definitions/dto.UnregisterPushSubscriptionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Subscription removed
          schema:
            $ref: '#/definitions/dto.SuccessResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Unregister push subscription
      tags:
      - Push Notifications
    post:
      consumes:
      - application/json
      description: Register a new Web Push subscription for the authenticated user's
        device
      parameters:
      - description: Push subscription data
        in: body
        name: subscription
        required: true
        schema:
          $ref: '#/definitions/dto.RegisterPushSubscriptionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Subscription registered
          schema:
            $ref: '#/definitions/dto.PushSubscriptionResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "409":
          description: Endpoint conflict
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Register push subscription
      tags:
      - Push Notifications
  /push/vapid-public-key:
    get:
      consumes:
      - application/json
      description: Get the VAPID public key needed for push subscription registration
      produces:
      - application/json
      responses:
        "200":
          description: VAPID public key
          schema:
            $ref: '#/definitions/dto.VapidPublicKeyResponse'
      summary: Get VAPID public key
      tags:
      - Push Notifications
  /register:
    post:
      consumes:
      - application/json
      description: Create a new user account with email, username, and password
      parameters:
      - description: Registration details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.RegisterRequest'
      produces:
      - application/json
      responses:
        "201":
          description: User created successfully
          schema:
            $ref: '#/definitions/dto.SuccessResponse'
        "400":
          description: Validation error or user exists
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      summary: Register a new user
      tags:
      - Authentication
  /relationships/lookup:
    post:
      consumes:
      - application/json
      description: Batch lookup relationship states for multiple users
      parameters:
      - description: Target user IDs
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/dto.RelationshipLookupRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.RelationshipLookupResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Lookup relationship states
      tags:
      - Follow
  /search/recent:
    delete:
      description: Remove all users from recent search history
      produces:
      - application/json
      responses:
        "200":
          description: Recent searches cleared
          schema:
            $ref: '#/definitions/dto.SuccessResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Server error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Clear all recent searches
      tags:
      - Search
  /search/recent/{userId}:
    delete:
      description: Remove a specific user from recent searches
      parameters:
      - description: User ID to remove from recent searches
        in: path
        name: userId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Recent search deleted
          schema:
            $ref: '#/definitions/dto.SuccessResponse'
        "400":
          description: Invalid user ID
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Server error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete a recent search
      tags:
      - Search
  /search/suggestions:
    get:
      description: Get recent searches and personalized trending users for autocomplete
        on focus
      produces:
      - application/json
      responses:
        "200":
          description: Recent and trending users
          schema:
            $ref: '#/definitions/dto.SearchSuggestionsResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "500":
          description: Server error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get search suggestions
      tags:
      - Search
  /tile-config:
    get:
      description: Get dashboard tile configuration for authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: Tile configuration
          schema:
            $ref: '#/definitions/dto.TileConfigResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get tile configuration
      tags:
      - Tile Config
    post:
      consumes:
      - application/json
      description: Save dashboard tile configuration
      parameters:
      - description: Tile configuration
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.SaveTileConfigRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Config saved
          schema:
            $ref: '#/definitions/dto.SuccessResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Save tile configuration
      tags:
      - Tile Config
  /tile-config/user:
    post:
      consumes:
      - application/json
      description: Get dashboard tile configuration for another user
      parameters:
      - description: Target username
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.GetTileConfigByUsernameRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Tile configuration
          schema:
            $ref: '#/definitions/dto.TileConfigResponse'
        "400":
          description: User not found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Private account
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get tile config by username
      tags:
      - Tile Config
  /unlike-day:
    post:
      consumes:
      - application/json
      description: Remove a like from a user's day
      parameters:
      - description: Unlike request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.LikeDayRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Unlike successful
          schema:
            $ref: '#/definitions/dto.LikeActionResponse'
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Unlike a user's day
      tags:
      - Likes
  /update-bio:
    post:
      consumes:
      - application/json
      description: Update user bio (max 150 characters)
      parameters:
      - description: Bio content
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.UpdateBioRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Bio updated
          schema:
            $ref: '#/definitions/dto.BioResponse'
        "400":
          description: Validation error
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update bio
      tags:
      - Profile
  /update-privacy:
    post:
      consumes:
      - application/json
      description: Set account privacy (public or private)
      parameters:
      - description: Privacy setting
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.UpdatePrivacyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Privacy updated
          schema:
            $ref: '#/definitions/dto.PrivacyResponse'
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update privacy setting
      tags:
      - Profile
  /update-username:
    post:
      consumes:
      - application/json
      description: Update the authenticated user's username
      parameters:
      - description: New username
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.UpdateUsernameRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Username updated successfully
          schema:
            $ref: '#/definitions/dto.UsernameUpdateResponse'
        "400":
          description: Validation error or username taken
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update username
      tags:
      - Profile
  /users:
    post:
      consumes:
      - application/json
      description: Search for users by username (excludes private accounts)
      parameters:
      - description: Search query
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/dto.SearchUsersRequest'
      produces:
      - application/json
      responses:
        "200":
          description: List of users
          schema:
            allOf:
            - $ref: '#/definitions/dto.DataResponse'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/dto.UserDTO'
                  type: array
              type: object
        "400":
          description: Invalid request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Search users
      tags:
      - Users
  /users/{targetId}/follow:
    delete:
      consumes:
      - application/json
      description: Unfollow a user
      parameters:
      - description: Target User ID
        in: path
        name: targetId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.SuccessResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Unfollow a user
      tags:
      - Follow
    post:
      consumes:
      - application/json
      description: Follow a user or send a follow request (for private accounts)
      parameters:
      - description: Target User ID
        in: path
        name: targetId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.FollowActionResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Follow a user
      tags:
      - Follow
  /users/{userId}/follow-counts:
    get:
      consumes:
      - application/json
      description: Get followers and following counts for a user
      parameters:
      - description: User ID
        in: path
        name: userId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.FollowCountsResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get follow counts
      tags:
      - Follow
  /users/{userId}/followers:
    get:
      consumes:
      - application/json
      description: Get paginated list of user's followers
      parameters:
      - description: User ID
        in: path
        name: userId
        required: true
        type: integer
      - description: Pagination cursor
        in: query
        name: cursor
        type: string
      - default: 20
        description: Number of results
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.FollowListResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user's followers
      tags:
      - Follow
  /users/{userId}/following:
    get:
      consumes:
      - application/json
      description: Get paginated list of users that user follows
      parameters:
      - description: User ID
        in: path
        name: userId
        required: true
        type: integer
      - description: Pagination cursor
        in: query
        name: cursor
        type: string
      - default: 20
        description: Number of results
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.FollowListResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user's following
      tags:
      - Follow
  /users/{userId}/mutuals:
    get:
      consumes:
      - application/json
      description: Get users that both viewer follows and who follow the target user
      parameters:
      - description: Target User ID
        in: path
        name: userId
        required: true
        type: integer
      - description: Pagination cursor
        in: query
        name: cursor
        type: string
      - default: 20
        description: Number of results
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/dto.MutualsResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get mutual followers
      tags:
      - Follow
  /users/{userId}/profile:
    get:
      description: Get public profile of another user by ID
      parameters:
      - description: User ID
        in: path
        name: userId
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: User profile
          schema:
            $ref: '#/definitions/dto.PublicProfileResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/dto.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get another user's profile
      tags:
      - Profile
securityDefinitions:
  BearerAuth:
    description: 'JWT Authorization header using the Bearer scheme. Example: "Bearer
      {token}"'
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
